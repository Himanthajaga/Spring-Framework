<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Order Management</title>

    <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
            crossorigin="anonymous"
    />

    <link rel="stylesheet" href="https://cdn.hugeicons.com/font/hgi-stroke-rounded.css"/>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"-->
    <!--          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">-->
</head>
<body>
<div class="container">
    <div class="form-card">
        <form id="orderForm">
            <h2 class="text-center mb-4">Place Order</h2>
            <div class="d-flex justify-content-between align-items-center gap-3 mb-3">
                <div class="w-100">
                    <label for="orderId" class="form-label">Order ID</label>
                    <input type="text" class="form-control" id="orderId" readonly/>
                </div>
                <div class="w-100">
                    <label for="orderDate" class="form-label">Order Date</label>
                    <input type="datetime-local" class="form-control" id="orderDate" readonly/>
                </div>
            </div>

            <div class="d-flex justify-content-between align-items-center gap-3 mb-3">
                <div class="w-100">
                    <label for="customerId" class="form-label">Customer ID</label>
                    <select id="customerId" name="customerId" class="form-control" required></select>
                </div>
                <div class="w-100">
                    <label for="customerName" class="form-label">Customer Name</label>
                    <input type="text" class="form-control" id="customerName" readonly/>
                </div>
            </div>

            <div class="d-flex justify-content-between align-items-center gap-3 mb-3">
                <div class="w-100">
                    <label for="itemCode" class="form-label">Item Code</label>
                    <select id="itemCode" name="itemCode" class="form-control" required></select>
                </div>
                <div class="w-100">
                    <label for="itemName" class="form-label">Item Name</label>
                    <input type="text" class="form-control" id="itemName" readonly/>
                </div>
            </div>

            <div class="d-flex justify-content-between align-items-center gap-3 mb-3">
                <div class="w-100">
                    <label for="itemPrice" class="form-label">Item Price</label>
                    <input type="number" class="form-control" id="itemPrice" readonly/>
                </div>
                <div class="w-100">
                    <label for="itemQty" class="form-label">Item Quantity</label>
                    <input type="number" class="form-control" id="itemQty" readonly/>
                </div>
            </div>

            <div class="d-flex justify-content-between align-items-start gap-3 mb-3">
                <div class="w-100">
                    <label for="orderQty" class="form-label">Order Quantity</label>
                    <input type="number" class="form-control" id="orderQty" min="1" required/>
                    <label id="orderQtyError" class="text-danger ms-2 d-none mt-1" style="font-size: 0.95rem"></label>
                </div>
                <div class="w-100">
                    <label for="totalPrice" class="form-label">Total Price</label>
                    <input type="number" class="form-control" id="totalPrice" readonly/>
                </div>
            </div>

            <div class="d-flex justify-content-end align-items-center mt-">
                <button type="button" id="placeOrderBtn" class="btn btn-primary px-3" data-bs-toggle="modal"
                        data-bs-target="#orderConfirmModal" disabled>
                    <i class="hgi-stroke hgi-invoice-03 fs-4 align-middle me-2"></i> Place Order
                </button>
            </div>
        </form>
        <div class="order-list mt-4">
            <h3 class="text-center mb-4">Order List</h3>
            <div class="table-responsive">
                <table class="table table-borderless table-hover">
                    <thead class="border-bottom border-dark">
                    <tr>
                        <th>Order ID</th>
                        <th>Customer</th>
                        <th>Item</th>
                        <th>Quantity</th>
                        <th>Price</th>
                        <th>Total Price</th>
                        <th>Order Date</th>
                    </tr>
                    </thead>
                    <tbody id="orderTable">
                    <!-- Dynamic order rows will be added here -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Order Confirmation modal -->
    <div
            class="modal fade"
            id="orderConfirmModal"
            tabindex="-1"
            data-bs-backdrop="static"
            data-bs-keyboard="false"
            aria-hidden="true"
    >
        <div class="modal-dialog">
            <div class="modal-content py-3">
                <div
                        class="modal-header border-0 d-flex flex-column align-items-center"
                >
                    <div class="bg-success-subtle text-success fs-4 mb-2 alert-icon">
                        <i class="hgi-stroke hgi-alert-01 align-middle"></i>
                    </div>
                    <h5 class="modal-title">Order Confirmation</h5>
                </div>
                <div class="modal-body text-center p-0 mb-2">
                    Are you sure you want to place this order?
                </div>
                <div
                        class="modal-footer d-flex justify-content-center gap-3 border-0"
                >
                    <button
                            type="button"
                            class="btn btn-secondary bg-secondary-subtle text-black border-0 rounded-pill"
                            data-bs-dismiss="modal"
                    >
                        No, Cancel
                    </button>
                    <button
                            type="button"
                            class="btn btn-success rounded-pill"
                            id="confirmPlaceOrderBtn"
                            onclick="saveOrder()"
                    >
                        Yes, Place Order!
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Alert Toast -->
    <div id="alertContainer" class="position-fixed bottom-0 end-0 my-2 mx-3 z-3">
        <div id="alertTemplate">
            <div class="alert alert-dismissible fade show" role="alert">
                <span class="alert-message"></span>
            </div>
        </div>
    </div>
</div>

<script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"
></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
 <script src="js/order.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>


<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <title>Place Order Management</title>-->
<!--    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"-->
<!--          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">-->
<!--</head>-->
<!--<body>-->
<!--<nav class="navbar navbar-expand-lg navbar-light bg-light">-->
<!--    <a class="navbar-brand" href="#">Place Order Management</a>-->
<!--    <span class="navbar-toggler-icon"></span>-->
<!--    <div class="collapse navbar-collapse" id="navbarNav">-->
<!--        <ul class="navbar-nav">-->
<!--            <a class="nav-link" href="index.html">Home <span class="sr-only"></span></a>-->
<!--            </li>-->
<!--            <li class="nav-item">-->
<!--                <a class="nav-link" href="item.html">Items</a>-->
<!--            </li>-->
<!--            <li class="nav-item">-->
<!--        </ul>-->
<!--    </div>-->
<!--</nav>-->
<!--<div class="container">-->
<!--    <div class="row">-->
<!--        <div class="col-md-6">-->
<!--            <form id="itemForm" class="mt-4">-->
<!--                <div class="form-group">-->
<!--                    <label for="orderID" class="form-label">Order ID:</label>-->
<!--                    <input type="text" class="form-control" id="orderID" placeholder="Order ID">-->
<!--                </div>-->
<!--                <label for="customerID" class="form-label">Customer ID:</label>-->
<!--                    <input type="text" class="form-control" id="customerID" placeholder="Customer ID" readonly>-->
<!--                <div class="mb-3 p-1">-->
<!--                    <label for="customerName" class="form-label">Customer Name:</label>-->
<!--                    <select class="form-select" id="customerName">-->
<!--                        <option selected>Select Customer Name</option>-->
<!--                    </select>-->
<!--                </div>-->
<!--                <div class="mb-3 p-1">-->
<!--                    <label for="orderDate" class="form-label">Order Date:</label>-->
<!--                    <input type="date" class="form-control" id="orderDate" placeholder="Order Date">-->
<!--                </div>-->
<!--                <div class="mb-3 p-1">-->
<!--                    <label for="itemCode" class="form-label">Item Code:</label>-->
<!--                    <input type="text" class="form-control" id="itemCode" placeholder="Item Code" readonly>-->
<!--                </div>-->
<!--                <div class="mb-3 p-1">-->
<!--                    <label for="itemName" class="form-label">Item Name:</label>-->
<!--                    <select class="form-select" id="itemName">-->
<!--                        <option selected>Select Item Name</option>-->
<!--                    </select>-->
<!--                </div>-->
<!--                <div class="mb-3 p-1">-->
<!--                    <label for="qty" class="form-label">Qty:</label>-->
<!--                    <input type="number" class="form-control" id="qty" placeholder="Qty">-->
<!--                </div>-->
<!--                <div class="mb-3 p-1">-->
<!--                    <label for="unitPrice" class="form-label">Unit Price:</label>-->
<!--                    <input type="number" class="form-control" id="unitPrice" placeholder="Unit Price" readonly>-->
<!--                </div>-->
<!--                <div class="mb-3 p-1">-->
<!--                    <label for="price" class="form-label">Price:</label>-->
<!--                    <input type="number" class="form-control" id="price" placeholder="Price" readonly>-->
<!--                </div>-->
<!--                <div class=" m-auto">-->
<!--                    <button type="button" class="btn btn-outline-primary" id="AddItem">ADD ITEM</button>-->
<!--                    <button type="button" class="btn btn-outline-success" id="AddOrder">PLACE ORDER</button>-->
<!--                </div>-->
<!--            </form>-->
<!--        </div>-->
<!--        <div class="col-md-6">-->
<!--            <section>-->
<!--                <table class="table table-hover table-bordered border-primary w-75 m-auto">-->
<!--                    <thead>-->
<!--                    <tr>-->
<!--                        <th scope="col">ORDER ID</th>-->
<!--                        <th scope="col">CUSTOMER ID</th>-->
<!--                        <th scope="col">ITEM CODE</th>-->
<!--                        <th scope="col">ITEM NAME</th>-->
<!--                        <th scope="col">QTY</th>-->
<!--                        <th scope="col">UNIT PRICE</th>-->
<!--                        <th scope="col">PRICE</th>-->
<!--                        <th scope="col">Actions</th>-->
<!--                    </tr>-->
<!--                    </thead>-->
<!--                    <tbody id="orderTableBody">-->

<!--                    </tbody>-->
<!--                </table>-->
<!--            </section>-->
<!--        </div>-->
<!--    </div>-->
<!--    &lt;!&ndash; Order Summary Modal &ndash;&gt;-->
<!--    <div class="modal fade" id="orderSummaryModal" tabindex="-1" aria-labelledby="orderSummaryModalLabel" aria-hidden="true">-->
<!--        <div class="modal-dialog modal-lg">-->
<!--            <div class="modal-content">-->
<!--                <div class="modal-header">-->
<!--                    <h5 class="modal-title" id="orderSummaryModalLabel">Order Summary</h5>-->
<!--                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>-->
<!--                </div>-->
<!--                <div class="modal-body">-->
<!--                    <table class="table table-hover table-bordered border-primary">-->
<!--                        <thead>-->
<!--                        <th scope="col">ORDER ID</th>-->
<!--                        <th scope="col">CUSTOMER ID</th>-->
<!--                        <th scope="col">ITEM CODE</th>-->
<!--                        <th scope="col">ITEM NAME</th>-->
<!--                        <th scope="col">QTY</th>-->
<!--                        <th scope="col">UNIT PRICE</th>-->
<!--                        <th scope="col">PRICE</th>-->
<!--                        </tr>-->
<!--                        </thead>-->
<!--                        <tbody id="orderSummaryBody">-->
<!--                        &lt;!&ndash; Order summary rows will be added here dynamically &ndash;&gt;-->
<!--                        </tbody>-->
<!--                    </table>-->
<!--                </div>-->
<!--                <div class="modal-footer">-->
<!--                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>-->
<!--                    <button type="button" class="btn btn-primary" id="confirmOrder">Confirm Order</button>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->

<!--    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>-->
<!--    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>-->

<!--    <script>-->
<!--        $(document).ready(function () {-->
<!--            loadCustomers();-->
<!--            loadItems();-->
<!--            $("#customerName").change(function () {-->
<!--                const selectedCustomer = $(this).val();-->
<!--                if (selectedCustomer !== "Select Customer Name") {-->
<!--                    $("#customerID").val(selectedCustomer);-->
<!--                } else {-->
<!--                    $("#customerID").val('');-->
<!--                }-->
<!--            });-->
<!--            $("#itemName").change(function () {-->
<!--                const selectedItem = $(this).val();-->
<!--                const selectedOption = $(this).find(':selected');-->
<!--                $("#itemCode").val(selectedItem);-->
<!--                $("#unitPrice").val(selectedOption.data('price'));-->
<!--                updatePrice();-->
<!--            });-->

<!--            $("#qty").on('input', function () {-->
<!--                updatePrice();-->
<!--            });-->

<!--            $("#AddItem").click(function () {-->
<!--                if (validateForm()) {-->
<!--                    let orderID = $("#orderID").val();-->
<!--                    let customerID = $("#customerID").val();-->
<!--                    let itemCode = $("#itemCode").val();-->
<!--                    let itemName = $("#itemName option:selected").text();-->
<!--                    let qty = $("#qty").val();-->
<!--                    let unitPrice = $("#unitPrice").val();-->
<!--                    let price = $("#price").val();-->

<!--                    let row = `<tr>-->
<!--                <td>${orderID}</td>-->
<!--                <td>${customerID}</td>-->
<!--                <td>${itemCode}</td>-->
<!--                <td>${itemName}</td>-->
<!--                <td>${qty}</td>-->
<!--                <td>${unitPrice}</td>-->
<!--                <td>${price}</td>-->
<!--                <td><button class='btn btn-danger delete-btn'>Delete</button></td>-->
<!--            </tr>`;-->
<!--                    $("#orderTableBody").append(row);-->
<!--                }-->
<!--            });-->

<!--            $("#orderTableBody").on('click', '.delete-btn', function () {-->
<!--                $(this).closest('tr').remove();-->
<!--            });-->

<!--            $("#AddOrder").click(function () {-->
<!--                if ($("#orderTableBody tr").length === 0) {-->
<!--                    alert("Please add at least one item to the order.");-->
<!--                    return;-->
<!--                }-->
<!--                let orderSummaryBody = $("#orderSummaryBody");-->
<!--                orderSummaryBody.empty();-->
<!--                $("#orderTableBody tr").each(function () {-->
<!--                    let row = $(this).clone();-->
<!--                    row.find('td:last').remove(); // Remove the delete button-->
<!--                    orderSummaryBody.append(row);-->
<!--                });-->
<!--                $("#orderSummaryModal").modal('show');-->
<!--            });-->

<!--            $("#confirmOrder").click(function () {-->
<!--                let orderID = $("#orderID").val();-->
<!--                let customerID = $("#customerID").val();-->
<!--                let orderDate = $("#orderDate").val();-->
<!--                let orderDetails = [];-->

<!--                $("#orderTableBody tr").each(function () {-->
<!--                    let itemCode = $(this).find("td:eq(2)").text();-->
<!--                    let qty = $(this).find("td:eq(4)").text();-->
<!--                    let unitPrice = $(this).find("td:eq(5)").text();-->

<!--                    orderDetails.push({-->
<!--                        itemCode: itemCode,-->
<!--                        qty: qty,-->
<!--                        unitPrice: unitPrice-->
<!--                    });-->
<!--                });-->

<!--                let order = {-->
<!--                    oid: orderID,-->
<!--                    customerId: customerID,-->
<!--                    date: orderDate,-->
<!--                    orderDetails: orderDetails-->
<!--                };-->

<!--                $.ajax({-->
<!--                    url: 'http://localhost:8080/api/v1/order/place',-->
<!--                    type: 'POST',-->
<!--                    contentType: 'application/json',-->
<!--                    data: JSON.stringify(order),-->
<!--                    success: function (response) {-->
<!--                        alert("Order placed successfully!");-->
<!--                        clearOrderForm();-->
<!--                    },-->
<!--                    error: function (error) {-->
<!--                        console.error('Error placing order:', error);-->
<!--                        alert("Failed to place order. Please try again.");-->
<!--                    }-->
<!--                });-->
<!--            })-->

<!--            function validateForm() {-->
<!--                let isValid = true;-->
<!--                let orderID = $("#orderID").val();-->
<!--                let customerID = $("#customerID").val();-->
<!--                let itemCode = $("#itemCode").val();-->
<!--                let qty = $("#qty").val();-->

<!--                if (!orderID) {-->
<!--                    alert("Order ID is required.");-->
<!--                    isValid = false;-->
<!--                }-->
<!--                if (!customerID || customerID === "0") {-->
<!--                    alert("Customer ID is required.");-->
<!--                    isValid = false;-->
<!--                }-->
<!--                if (!itemCode) {-->
<!--                    alert("Item Code is required.");-->
<!--                    isValid = false;-->
<!--                }-->
<!--                if (!qty || qty <= 0) {-->
<!--                    alert("Quantity must be greater than zero.");-->
<!--                    isValid = false;-->
<!--                }-->

<!--                return isValid;-->
<!--            }-->

<!--            function loadCustomers() {-->
<!--                $.ajax({-->
<!--                    url: 'http://localhost:8080/api/v1/customer/get',-->
<!--                    type: 'GET',-->
<!--                    success: function (response) {-->
<!--                        if (response.data && Array.isArray(response.data)) {-->
<!--                            const customers = response.data;-->
<!--                            const customerSelect = $('#customerName');-->
<!--                            customerSelect.empty();-->
<!--                            customerSelect.append('<option selected>Select Customer Name</option>');-->
<!--                            customers.forEach(customer => {-->
<!--                                customerSelect.append(`<option value="${customer.id}">${customer.name}</option>`);-->
<!--                            });-->
<!--                        } else {-->
<!--                            console.error('Invalid response format:', response);-->
<!--                        }-->
<!--                    },-->
<!--                    error: function (error) {-->
<!--                        console.error('Error fetching customers:', error);-->
<!--                    }-->
<!--                });-->
<!--            }-->

<!--            function loadItems() {-->
<!--                $.ajax({-->
<!--                    url: 'http://localhost:8080/api/v1/item/get',-->
<!--                    type: 'GET',-->
<!--                    success: function (response) {-->
<!--                        if (response.data && Array.isArray(response.data)) {-->
<!--                            const items = response.data;-->
<!--                            const itemSelect = $('#itemName');-->
<!--                            itemSelect.empty();-->
<!--                            itemSelect.append('<option selected>Select Item Name</option>');-->
<!--                            items.forEach(item => {-->
<!--                                itemSelect.append(`<option value="${item.code}" data-price="${item.unitPrice}">${item.description}</option>`);-->
<!--                            });-->
<!--                        } else {-->
<!--                            console.error('Invalid response format:', response);-->
<!--                        }-->
<!--                    },-->
<!--                    error: function (error) {-->
<!--                        console.error('Error fetching items:', error);-->
<!--                    }-->
<!--                });-->
<!--            }-->

<!--            function updatePrice() {-->
<!--                const selectedItem = $('#itemName').find(':selected');-->
<!--                const unitPrice = selectedItem.data('price');-->
<!--                const qty = $('#qty').val();-->
<!--                const price = unitPrice * qty;-->
<!--                $('#price').val(price);-->
<!--            }-->

<!--            function clearOrderForm() {-->
<!--                $("#orderID").val('');-->
<!--                $("#customerID").val('');-->
<!--                $("#customerName").val('Select Customer Name');-->
<!--                $("#itemCode").val('');-->
<!--                $("#itemName").val('Select Item Name');-->
<!--                $("#qty").val('');-->
<!--                $("#unitPrice").val('');-->
<!--                $("#price").val('');-->
<!--                $("#orderTableBody").empty();-->
<!--            }-->
<!--        });-->
<!--    </script>-->
<!--</div>-->
<!--</body>-->
<!--</html>-->